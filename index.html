<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>shiro-ext by eskatos</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>shiro-ext</h1>
        <p>Extensions for Apache Shiro</p>

        <p class="view"><a href="https://github.com/eskatos/shiro-ext">View the Project on GitHub <small>eskatos/shiro-ext</small></a></p>


        <ul>
          <li><a href="https://github.com/eskatos/shiro-ext/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/eskatos/shiro-ext/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/eskatos/shiro-ext">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>Apache Shiro Extensions</h1>

<p>This project contains <a href="http://shiro.apache.org/" title="Apache Shiro">Apache Shiro</a> extensions.</p>

<pre><code>"Apache Shiro is a powerful and easy-to-use Java security framework that performs
 authentication, authorization, cryptography, and session management. With Shiro’s
 easy-to-understand API, you can quickly and easily secure any application – from
 the smallest mobile applications to the largest web and enterprise applications."
</code></pre>

<p>For now only x509 related extensions are available.</p>

<h2>X509</h2>

<p>This extension is splitted in two jars :</p>

<ul>
<li>shiro-ext-x509-core that depends on <a href="http://www.slf4j.org/">slf4j-api</a>, <a href="http://www.bouncycastle.org/">bouncycastle</a> provider and shiro-c
ore,</li>
<li>shiro-ext-x509-web that depends on shiro-ext-x509-core and shiro-web.</li>
</ul><p>You certainly want to depend on the -web artifact. The project is hosted in maven central.
<a href="http://mavencentral.sonatype.com/#search%7Cga%7C1%7Cshiro-ext-x509-web">here</a> you'll find a quick copy/paste for the dependency.</p>

<p>Be sure to read about X509 certificates before choosing an authentication strategy.</p>

<h3>CredentialsMatchers</h3>

<p>The following credential matchers are provided:</p>

<ul>
<li>
<p>X509CredentialsPKIXPathMatcher</p>

<p>Custom PKIX path validation based on granted trust anchors provided by your Realm. Works for direct X509 authentication and with forwarded X509 authentication only if the full client certificate is available.</p>
</li>
<li>
<p>X509CredentialsSha256Matcher</p>

<p>Compute the Sha256 hashes of the client certificate and the one provided by your Realm and compare them. Works for direct X509 authentication and with forwarded X509 authentication only if the full client certificate is available.</p>
</li>
<li>
<p>X509CredentialsIssuerDNSNMatcher</p>

<p>Compare issuer distinguished name and serial number of the client certificate against info provided by your Realm. Works in both X509 authentication modes, usefull if your Realm can not access the full certificate.</p>
</li>
<li>
<p>X509CredentialsSujbectDNMatcher</p>

<p>Compare subject distinguished name of the client certificate against info provided by your Realm. Works in both X509 authentication modes, usefull if your Realm can not access the full certificate.</p>
</li>
</ul><h3>Your X509 Realm</h3>

<p>You will need to implement a Realm extending AbstractX509Realm and use it in your Shiro configuration:</p>

<pre><code>[main]
x509Realm = com.acme.YourRealm
</code></pre>

<h3>Client X509Certificate authentication</h3>

<p>Use the following filter in your Shiro configuration:</p>

<pre><code>[main]
x509 = org.codeartisans.shiro.x509.web.filter.authc.X509AuthenticationFilter

[urls]
/protected = x509
</code></pre>

<h3>Forwarded X509 authentication</h3>

<p>You need this if your application is deployed in a container siting behind a reverse proxy and hence the ssl handshake is done by the reverse proxy.</p>

<p>For now the HTTP headers used to read forwarded SSL data from reverse proxies use the following names:</p>

<ul>
<li>X-SSL-Client-Cert</li>
<li>X-SSL-Client-S-DN</li>
<li>X-SSL-Client-I-DN</li>
<li>X-SSL-Client-M-Serial</li>
</ul><p>If you need configuration support for the header names, please fill an issue.</p>

<p>By default the filter read <strong>no</strong> headers and hence simply refuse any authentication attempt.
You need to choose which headers to use in order to build the X509AuthenticationToken that will be used by the CredentialMatcher of your choice.</p>

<p>Here are three Shiro configuration snippets for the different CredentialMatchers:</p>

<p>For X509CredentialsPKIXPathMatcher or X509CredentialsSha256Matcher:</p>

<pre><code>[main]
x509 = org.codeartisans.shiro.x509.web.filter.authc.ForwardedX509AuthenticationFilter
x509.useCertificate = true

[urls]
/protected = x509
</code></pre>

<p>For X509CredentialsIssuerDNSNMatcher:</p>

<pre><code>[main]
x509 = org.codeartisans.shiro.x509.web.filter.authc.ForwardedX509AuthenticationFilter
x509.useIssuerDN = true
x509.useSerialNumber = true

[urls]
/protected = x509
</code></pre>

<p>For X509CredentialsSujbectDNMatcher:</p>

<pre><code>[main]
x509 = org.codeartisans.shiro.x509.web.filter.authc.ForwardedX509AuthenticationFilter
x509.useSubjectDN = true

[urls]
/protected = x509
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/eskatos">eskatos</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-36048640-7");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>